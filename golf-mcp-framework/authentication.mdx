---
title: 'Authentication'
description: 'Implement JWT, development, and API key authentication in your GolfMCP servers.'
---

GolfMCP provides three authentication mechanisms to secure your MCP servers:
1. **JWT Authentication** - Enterprise-grade authentication with JWKS support for production
2. **Development Authentication** - Simple token-based authentication for development and testing
3. **API Key Authentication** - Pass-through authentication to upstream APIs

Authentication is configured using a dedicated `auth.py` file in your project root, providing clean separation from other build logic.

## JWT Authentication

### Overview

JWT authentication provides enterprise-grade security with JWKS (JSON Web Key Set) support. This is the recommended approach for production environments where you need standards-compliant token validation.

### Configuration

Configure JWT authentication in your project's `auth.py`:

```python
# auth.py
from golf.auth import configure_jwt_auth

configure_jwt_auth(
    jwks_uri_env_var="JWKS_URI",
    issuer_env_var="JWT_ISSUER", 
    audience_env_var="JWT_AUDIENCE",
    required_scopes=["read:user"]
)
```

### Environment Variables

Set these environment variables in your `.env` file:

```bash
JWKS_URI=https://your-provider.com/.well-known/jwks.json
JWT_ISSUER=https://your-provider.com/
JWT_AUDIENCE=your-api-audience
```

### How it Works

1. **Token Validation**: Golf validates JWTs against the JWKS endpoint
2. **Standards Compliance**: Full RFC 7519 JWT validation
3. **Scope Verification**: Ensures tokens have required scopes

## Development Authentication

### Overview

Development authentication provides a simple token-based system perfect for development and testing environments. You can define custom tokens with specific client IDs and scopes.

### Configuration

Configure development authentication in your project's `auth.py`:

```python
# auth.py
from golf.auth import configure_dev_auth

configure_dev_auth(
    tokens={
        "dev-token-123": {
            "client_id": "dev-client",
            "scopes": ["read", "write"]
        },
        "test-token-456": {
            "client_id": "test-client",
            "scopes": ["read"]
        }
    },
    required_scopes=["read"]
)
```

### Using Development Tokens

Pass tokens via the Authorization header:

```bash
curl -H "Authorization: Bearer dev-token-123" http://localhost:3000/sse
```

### Benefits

- **Simple Setup**: No external identity providers required
- **Flexible Scopes**: Define custom scopes per token
- **Fast Development**: Immediate authentication without OAuth flows
- **Testing Friendly**: Easy to create tokens for different test scenarios

## API Key Authentication

### Overview

Golf provides a simple API key pass-through authentication mechanism that allows MCP servers to extract API keys from request headers and forward them to upstream services. The actual authentication happens at the destination API level, not within the MCP server.

### Configuration

Configure API key extraction in your project's `auth.py`:

```python
# auth.py
from golf.auth import configure_api_key

# Configure which header contains the API key
configure_api_key(
    header_name="Authorization",  # Header to extract from
    header_prefix="Bearer "       # Optional prefix to strip
)
```

### How it works

1. **Middleware**: Golf automatically adds middleware that extracts the API key from incoming request headers
2. **Context Storage**: The extracted key is stored in a request-scoped context (only exists for the duration of the request)
3. **Tool Access**: Tools retrieve the API key using `get_api_key()`
4. **Pass-through**: Tools forward the key to upstream APIs in whatever format they require

### Using API Keys in Tools

Tools access the API key with a simple import:

```python
from golf.auth import get_api_key

async def my_tool():
    api_key = get_api_key()
    if not api_key:
        return {"error": "No API key provided"}
    
    # Use the key with your API
    response = await client.get(
        "https://api.example.com/endpoint",
        headers={"Authorization": f"Bearer {api_key}"}
    )
```

### Complete Example: GitHub API Tool

Here's a complete example of a GitHub tool using API key authentication:

**auth.py**:
```python
from golf.auth import configure_api_key

# GitHub expects: Authorization: Bearer ghp_xxxxxxxxxxxx
configure_api_key(
    header_name="Authorization",
    header_prefix="Bearer "
)
```

**tools/repos/list.py**:
```python
"""List GitHub repositories for a user."""

from typing import Annotated, Optional, Dict, Any, List
from pydantic import BaseModel, Field
import httpx

from golf.auth import get_api_key


class Output(BaseModel):
    """List of repositories."""
    repositories: List[Dict[str, Any]]
    error: Optional[str] = None


async def list(
    username: Annotated[str, Field(description="GitHub username")]
) -> Output:
    """List public repositories for a GitHub user."""
    # Get the API key from the request context
    github_token = get_api_key()
    
    # Prepare headers - include token if available
    headers = {
        "Accept": "application/vnd.github.v3+json",
        "User-Agent": "My-MCP-Server"
    }
    if github_token:
        headers["Authorization"] = f"Bearer {github_token}"
    
    try:
        async with httpx.AsyncClient() as client:
            response = await client.get(
                f"https://api.github.com/users/{username}/repos",
                headers=headers,
                timeout=10.0
            )
            
            if response.status_code == 401:
                return Output(
                    repositories=[], 
                    error="Invalid GitHub token"
                )
            
            response.raise_for_status()
            repos = response.json()
            
            return Output(
                repositories=[{
                    "name": r["name"],
                    "stars": r["stargazers_count"]
                } for r in repos]
            )
    except Exception as e:
        return Output(repositories=[], error=str(e))


export = list
```

### Common configuration patterns

**X-API-Key Header** (many APIs):
```python
# auth.py
configure_api_key(header_name="X-API-Key")
```

**Authorization with Different Prefixes**:
```python
# auth.py
# OpenAI style
configure_api_key(
    header_name="Authorization",
    header_prefix="Bearer "  # Strips "Bearer sk-..." → "sk-..."
)

# No prefix
configure_api_key(
    header_name="X-Custom-Token",
    header_prefix=""  # Token used as-is
)
```

## Authentication Configuration

### The `auth.py` File

Golf v0.2.0 introduces a dedicated `auth.py` file for authentication configuration, providing clean separation and better organization.

```
my-project/
├── golf.json
├── auth.py       # ← Authentication setup
├── tools/
└── resources/
```

### Benefits of `auth.py`

- **Clean Separation**: Authentication logic separate from other build tasks
- **Better Organization**: Easier to maintain authentication-heavy projects
- **Improved Clarity**: Clear intent and easier to understand
- **Enhanced Validation**: Better error messages for authentication setup issues

<Note>
  **Legacy Support:** Authentication configuration in `pre_build.py` is still supported but deprecated. Use `auth.py` for new projects.
</Note>

These utilities respect the authentication context and provide enhanced telemetry when used with the Golf Platform.

## Choosing the Right Authentication Method

### When to Use Each Method

**JWT Authentication:**
- Production environments requiring standards-compliant security
- Integration with existing identity providers (Auth0, Okta, etc.)
- Applications requiring fine-grained scope validation
- Enterprise deployments with existing JWKS infrastructure

**Development Authentication:**
- Local development and testing
- Simple proof-of-concept projects
- Internal tools where you control token distribution
- Scenarios where you need custom scopes and client IDs

**API Key Authentication:**
- Pass-through to external APIs (GitHub, OpenAI, etc.)
- Simple authentication requirements
- When the actual auth happens at the destination service
- Stateless token forwarding scenarios

### Security Considerations

- **JWT**: Most secure, standards-compliant, supports token expiration and validation
- **Development**: Simple but should only be used in development/testing
- **API Key**: Security depends on the upstream service; tokens are passed through as-is

### Configuration Validation

Golf automatically validates your authentication configuration at build time:

- Ensures required environment variables are defined
- Validates authentication configuration for conflicts
- Validates authentication method compatibility
- Provides clear error messages for setup issues 